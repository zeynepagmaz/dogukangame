<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Futbol Oyunu - Beşiktaş Temalı</title>
<style>
    body {
        margin: 0;
        background: #111;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
    #gameCanvas {
        background: green;
        border: 5px solid white;
        box-shadow: 0 0 30px rgba(0,0,0,0.7);
        background-image: radial-gradient(rgba(255,255,255,0.2) 2%, transparent 3%),
                          linear-gradient(white 2px, transparent 2px);
        background-size: 80px 80px, 100% 100%;
        position: relative;
    }
    /* Beşiktaş logosunu basit SVG ile arka plana ekleme */
    #gameCanvas::before {
        content: '';
        position: absolute;
        inset: 0;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><circle cx="60" cy="60" r="55" fill="black"/><text x="50%" y="55%" dominant-baseline="middle" text-anchor="middle" font-size="50" fill="white">BJK</text></svg>') center/30% no-repeat;
        opacity: 0.15;
        z-index: 0;
    }
    #score {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        color: white;
        font-size: 24px;
        font-weight: bold;
        text-shadow: 0 0 5px black;
        z-index: 2;
    }
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="500"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let player = { x: 100, y: 250, w: 30, h: 30, speed: 5 };
let ball = { x: 140, y: 250, r: 10, dx: 0, dy: 0, speed: 7, free: true };
let goalie = { x: 740, y: 200, w: 20, h: 100, speed: 3 };
let keys = {};
let score = 0;

// Klavye olayları
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function drawPlayer() {
    ctx.fillStyle = "#fff";
    ctx.fillRect(player.x, player.y, player.w, player.h);
    ctx.strokeStyle = "black";
    ctx.strokeRect(player.x, player.y, player.w, player.h);
}

function drawBall() {
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI * 2);
    ctx.fillStyle = "white";
    ctx.fill();
    ctx.strokeStyle = "black";
    ctx.stroke();
}

function drawGoalie() {
    ctx.fillStyle = "red";
    ctx.fillRect(goalie.x, goalie.y, goalie.w, goalie.h);
    ctx.strokeStyle = "black";
    ctx.strokeRect(goalie.x, goalie.y, goalie.w, goalie.h);
}

function drawScore() {
    ctx.font = "20px Arial";
    ctx.fillStyle = "white";
    ctx.fillText("Skor: " + score, 350, 30);
}

function movePlayer() {
    if (keys["ArrowUp"] && player.y > 0) player.y -= player.speed;
    if (keys["ArrowDown"] && player.y + player.h < canvas.height) player.y += player.speed;
    if (keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;
    if (keys["ArrowRight"] && player.x + player.w < canvas.width) player.x += player.speed;
}

function shootBall() {
    if (keys[" "] && ball.free) {
        ball.free = false;
        ball.dx = 5; 
        ball.dy = (Math.random() - 0.5) * 4; 
    }
}

function moveBall() {
    if (!ball.free) {
        ball.x += ball.dx;
        ball.y += ball.dy;
        // Kaleye gol
        if (ball.x + ball.r > canvas.width) {
            score++;
            resetBall();
        }
        // Kaleci kurtarırsa
        if (ball.x + ball.r > goalie.x && 
            ball.y > goalie.y && 
            ball.y < goalie.y + goalie.h) {
            resetBall();
        }
        // Top kenara çarparsa sekmesin, sadece geri dönsün
        if (ball.y - ball.r < 0 || ball.y + ball.r > canvas.height) {
            ball.dy *= -1;
        }
    } else {
        // Top oyuncuya bağlı
        ball.x = player.x + player.w + 10;
        ball.y = player.y + player.h/2;
    }
}

function moveGoalie() {
    // Topa doğru akıllı hareket
    if (ball.y < goalie.y + goalie.h/2) goalie.y -= goalie.speed;
    else if (ball.y > goalie.y + goalie.h/2) goalie.y += goalie.speed;

    // Sınırlar
    if (goalie.y < 0) goalie.y = 0;
    if (goalie.y + goalie.h > canvas.height) goalie.y = canvas.height - goalie.h;
}

function resetBall() {
    ball.x = player.x + player.w + 10;
    ball.y = player.y + player.h/2;
    ball.dx = 0;
    ball.dy = 0;
    ball.free = true;
}

function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    movePlayer();
    shootBall();
    moveBall();
    moveGoalie();
    drawPlayer();
    drawBall();
    drawGoalie();
    drawScore();
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
